#!/usr/bin/env bash

# Run without downloading:
# curl https://raw.githubusercontent.com/kaykayehnn/dotfiles/master/.macos | bash

# Install homebrew
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

# Install deps from Brewfile
brew bundle

NPM_GLOBAL_PACKAGES=(
  create-react-app
  fx
  gatsby-cli
  jest
  netlify-cli
  nodemon
  prettier
  serve@^6
  source-map-explorer
  typescript
  webpack-bundle-analyzer
)

# Install npm packages
yarn global add ${NPM_GLOBAL_PACKAGES[@]}

OMZ_PLUGINS=(
# Fish-like fast/unobtrusive autosuggestions for zsh.
  zsh-users/zsh-autosuggestions
# Fish shell-like syntax highlighting for Zsh.
  zsh-users/zsh-syntax-highlighting
# Additional completion definitions for Zsh.
  zsh-users/zsh-completions
)

# Install Oh-My-ZSH
sh -c "$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"

# Install OMZ plugins
for plugin in "${OMZ_PLUGINS[@]}"; do
  git clone "https://github.com/$plugin" "${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/$(basename $plugin)"
done

# Install tmux plugins
# https://github.com/tmux-plugins/tpm/blob/master/docs/automatic_tpm_installation.md
if ! [ -d "$HOME/.tmux/plugins/tpm" ]; then
   git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm && ~/.tmux/plugins/tpm/bin/install_plugins
fi
